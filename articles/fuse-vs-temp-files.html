<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta http-equiv="CACHE-CONTROL" content="NO-CACHE"><title>FUSE vs the Temp Files</title><meta name="viewport" content="width=device-width"><link rel="shortcut icon" href="/assets/favicon.ico"><link rel="stylesheet" href="/assets/styles/normalize.css"><link rel="stylesheet" href="/assets/styles/markdown.css"><link rel="stylesheet" href="/assets/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/assets/styles/style.css"><link rel="stylesheet" href="/assets/styles/highlight_solarized_dark.css"><meta name="google-site-verification" content="jdNxQ0D7Pu5Zp7em_fWgy3CMhDdvHL9R5aRt8HuL8KY"><script>var gaProperty = 'UA-342641-5';
if (document.cookie.indexOf("analytics-opt-out" + '=true') == -1) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', gaProperty, 'pdxhub.org');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
}</script></head><body><div class="container"><div class="header"><a href="/" title="Back to Eric's homepage" class="index">◀︎<i class="fa fa-coffee "></i></a> <h1 class="title"><span class="brand"> FUSE vs the Temp Files </span></h1><h3 class="subheading">My experiences storing my Documents folder in Camli</h3><div class="gather"><span data-raw="2014-04-27" class="date">Apr 26, 2014</span> <a href="/tags#camlistore" class="tag label label-default"><i class="fa fa-tag "></i>camlistore</a></div></div><div class="cols"><div class="maincol"><div class="main"><p>I moved my Documents folder into camli (on my home ARM server) and have been accessing it via FUSE for 10 days or so.</p>
<p>Overall, the FUSE filesystem has been unstable.</p>
<h3>1. FUSE exits occasionally without explaination</h3><p>This is probably an easy fix, I haven&#39;t looked at the code yet.</p>
<h3>2. writes block until everything has been uploaded successfully</h3><p>This is painful over slow links. Not only does the writing app (VIM/sublime) block, but also things tmux (not sure why, maybe only one thread in FUSE somewhere?) </p>
<h3>3. it doesn&#39;t provide a way to exclude files (such as temp files) and metadata operations (xattrs), so lots of garbage gets created</h3><p>Support for excluding specific files/operations (xattrs) would require a local buffer of some sort, either a blob store or a real filesystem overlay, which could be flushed when FUSE is unmounted.</p>
<p>One short term bit which would help is a switch to disable xattr support at the FS level.</p>
<p>Also, tell apps to write their temp files elsewhere and disable atomic writes;</p>
<ul>
<li>vim: <a href="http://stackoverflow.com/questions/1636297/how-to-change-the-folder-path-for-swp-files-in-vim">swp and backup files in ~/.tmp</a></li>
<li><p>Sublime Text: <a href="http://stackoverflow.com/questions/20634684/what-is-sublime-text-doing-when-i-save-a-file">disable atomic writes</a></p>
</li>
<li><p>Provide a buffer to keep files before they are sent to the server.</p>
</li>
<li>don&#39;t try to store files until they&#39;re unchanged for a little while. This should filter out scratch files like *.crdownload</li>
</ul>
<p>camli personal storage system
start server
cammount
import everything
similarity to git
recent importer rewrite (web config ui, store api creds and user auth tokens as data objects)
importer rewrite
foursquare</p></div></div><div class="sidebar"></div></div><div class="footer"></div></div><script src="/assets/scripts/jquery.min.js"></script><script src="/assets/scripts/lodash.min.js"></script><script src="/assets/scripts/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="/assets/scripts/toggle-grid.js"></script><script async defer src="https://hypothes.is/embed.js"></script></body></html>